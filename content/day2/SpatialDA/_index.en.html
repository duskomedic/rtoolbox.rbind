---
date: "2016-04-09T16:50:16+02:00"
title: Analiza geo-pozicioniranih podataka
weight: 3
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>


<p>R sadrÅ¾i spektar paketa koji vam obezbeÄ‘uju upravljanje sa geo-pozicioniranim podacima i set oparaciju za njihovu analizu. Analiza geo-pozicioniranih podataka nije viÅ¡e dostupna jedino ekspertima koji su radili na skupim kompjuterima i skupim softverima. R ima impresivne geografske sposobnosti koje su dostupne svima onima koji Å¾ele da ih istraÅ¾uju.</p>
<p>Pre nego Å¡to uÄ‘emo dublje u geo-prostorno mapiranje u R-u, upoznajmo se sa osnovnim idejama ovakve vrste podataka.</p>
<p>Prostorni podaci sastoje se od:</p>
<ul>
<li>Koordinata objekta</li>
<li>Koordinata povezanih fiziÄkih lokacija na Planeti: koordinatni refentni sistem: <strong>coordinate reference system</strong> (<strong>CRS</strong>)</li>
</ul>
<p>Postoje <strong>dva tipa CRS-a</strong>:</p>
<ol style="list-style-type: decimal">
<li>Geografski</li>
</ol>
<ul>
<li>SpecifiÄne lokacije na povrÅ¡ini definisane su sa tri dimenzije na modelu Zemlje.</li>
<li>Longitudinalni i lateralni</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Projektovani</li>
</ol>
<ul>
<li>Konverzija trodimenzionalne mreÅ¾e na dvodimenzionalnu povrÅ¡inu.</li>
</ul>
<p>Prema tehnici njihovog Äuvanja, prostorni podaci su jedna od sledeÄ‡e dve vrste:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Rasterski podaci</strong>: sastavljeni od mreÅ¾e Ä‡elija koje su indentifikovane redom i kolonom. Celina geografskog podruÄja podeljena je u grupe individualnih Ä‡elija, koje predstavljaju sliku (satelitske slike)</p></li>
<li><p><strong>Vektorski podaci</strong> sastavljeni su od taÄaka, linija i poligona. Na primer bolnice, kuÄ‡e itd. predstavljene su taÄkama, dok su reke, putevi, itd, predstavljene su linijama. Sela i gradovi su predstavljeni poligonima.</p></li>
</ol>
<p>Kada radite analizu prostornih podataka takoÄ‘e Ä‡ete raditi i sa kategoriÄkim podacima koji sadrÅ¾e relevantne informacija o prostornim podacima. Analize Ä‡e se raditi na kategoriÄkim podacima koji su povezani sa geo-prostornim. Ovakvi podaci mogu biti:</p>
<ul>
<li>nominal</li>
<li>ordinal</li>
<li>podaci raspona (interval data)</li>
<li>podaci o odnosu (ratio data),</li>
</ul>
<p>tj. kategoriÄki ili merljivi tip podataka.</p>
<p><strong>StatiÄke mape: fajl oblika</strong></p>
<p>R poseduje impresivne geografske kapacitete i moÅ¾e da obraÄ‘uje fajlove razliÄitih vrsta prostornih podataka ukljuÄujuÄ‡i geojson i KML. IlustrovaÄ‡emo upotrebu ESRI (shapefile) fajlova formata, koji Äuvaju netopoloÅ¡ku geometiju i kategoriÄke informacije za prostorne odlike u setu podataka. Ovi podaci sastavljeni su od glavnog fajla, index fajla i dBASE tabele.</p>
<ul>
<li>.shp - lista oblika i vrhova</li>
<li>.shx - sadrÅ¾i indeks sa odstupanjima</li>
<li>.dbf - fajl odnosa izmeÄ‘u geometrije i kategoriÄkih podataka</li>
</ul>
<p>Da biste pravilno uvezli datoteku ESRI oblika u R, sve tri datoteke moraju biti prisutne u direktorijumu i moraju imatu isto ime (osim nastavka koji se odnosi na tip fajla).</p>
<p>ZapoÄnimo Äitanje datoteke oblika regiona Srbije koja je dostupna na <a href="https://gadm.org/download_country_v3.html">GADM maps and data</a>.</p>
<p>Prvo, preuzmite fajlove koji su nam portrebni sa sledeÄ‡eg GitHub repozitorija: <a href="https://github.com/TanjaKec/gadm36_SRB_shp" class="uri">https://github.com/TanjaKec/gadm36_SRB_shp</a>. Obavezno saÄuvajte fajl u radni direktorijum svoga R-projekta pre nego Å¡to zatraÅ¾ite od R da izvrÅ¡i sledeÄ‡i kod:</p>
<pre><code>## If you don&#39;t have sf installed yet, uncomment and run the line below
#install.packeges(&quot;sf&quot;)

library(ggplot2)
library(sf)

#pointed to the shape file
serbia_location &lt;- &quot;gadm36_SRB_1.shp&quot;

#used the st_read() function to import it
serbia_districts &lt;- st_read(serbia_location)

# take a look at the file
View(serbia_districts)

# plot the disstricts 
ggplot(serbia_districts) + 
  geom_sf()</code></pre>
<p><img src="/day2/SpatialDA/images/serbia.png?width=40pc" /></p>
<p>Ovo dobro izgleda ğŸ˜ƒ SledeÄ‡e, Å¡to Å¾elimo da dodamo podatke i da ih â€obojimoâ€œ. DodaÄ‡emo podatke o broju stanovnika u Srbiji u 2017. godini koji su nam dostupni u datom fajlu â€œSerbian_Pop.csvâ€ file.</p>
<pre><code>population &lt;- read.csv(&quot;Serbian_Pop.csv&quot;)
View(population)

library(dplyr)

serbia_pop &lt;- left_join(serbia_districts, population,
                          by=c(&quot;NAME_1&quot; = &quot;District&quot;))

View(serbia_pop)


ncol(serbia_districts)

ncol(population)

ncol(serbia_pop)

names(serbia_pop)


ggplot(serbia_pop) +
  geom_sf(aes(fill=total_pop)) +
  scale_fill_distiller(direction = 1, name = &quot;Population&quot;) +
  labs(title=&quot;Population of Serbia for 2017&quot;, caption=&quot;Source: Statisticki Zavod SR&quot;)</code></pre>
<p><img src="/day2/SpatialDA/images/SR_pop_2017.png?width=40pc" /></p>
<p>Ponekad biste moÅ¾da Å¾eleli da predstavite regione kao skup Äestica na viÅ¡e ploÄa. Zapamtite, ovo moÅ¾ete uraditi i upotrebom <code>facet</code> funkcije <code>ggplot</code> biblioteke.</p>
<pre><code>ggplot(serbia_pop) +
  geom_sf(aes(fill = total_pop)) +
  scale_fill_distiller(direction = 1, name = &quot;Population&quot;) +
  labs(title=&quot;Population of Serbia for 2017&quot;, caption=&quot;Source: Statisticki Zavod SR&quot;) +
  facet_wrap(~NAME_1)</code></pre>
<p><img src="/day2/SpatialDA/images/facet_sr.png?width=40pc" /></p>
<p><strong>Interaktivne mape: letak</strong></p>
<p><code>Leaflet</code> je jedan od najpopularnijih JavaScript biblioteka za interktivne mape koje su integrisane u R, zahvaljuÄ‡i grupi ljudu okupljenih oko Rstudija. IlustrovaÄ‡emo kako je jednostavno da se iscrta lokacijska mapa upotrebom leaflet paketa, ali potrebno je prethodno da nauÄine viÅ¡e o ovom paketu sa stranice <a href="https://rstudio.github.io/leaflet/">Leaflet for R</a>.</p>
<pre class="r"><code>## If you don&#39;t have leaflet installed yet, uncomment and run the line below
#install.packeges(&quot;leaflet&quot;)
library(leaflet)
# Initialize and assign us as the leaflet object
us &lt;- leaflet() %&gt;%
  # add tiles to the leaflet object
  addTiles() %&gt;%  
  # setting the centre of the map and the zoom level
  setView(lng = 21.43667, lat = 41.99578, zoom = 15) %&gt;% 
  # add a popup marker 
  addMarkers(lng = 21.43551, lat = 41.99405, popup = &quot;&lt;b&gt;Ciao!&lt;/b&gt;&lt;br&gt;&lt;a href=&#39;http://balkansmedia.org/innovation-lab/2nd-media-innovation-lab-master-classes-and-presentations&#39;&gt;2nd Media Innovation Lab! ğŸ˜€&lt;/a&gt;&quot;)

us</code></pre>
<p>&lt;!iv id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[41.99405,21.43551,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"<b>Ciao!<\/b><br><a href='http://balkansmedia.org/innovation-lab/2nd-media-innovation-lab-master-classes-and-presentations'>2nd Media Innovation Lab! <U+0001F600><\/a>",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[41.99578,21.43667],15,[]],"limits":{"lat":[41.99405,41.99405],"lng":[21.43551,21.43551]}},"evals":[],"jsHooks":[]}</script><!Pogledajte zanimljivu veb stranicu koja vas upoznaje sa svim moguÄ‡nostima kreiranja mapa sa <a href="https://maptimeboston.github.io/leaflet-intro/">â€˜leafletâ€™</a>. Dobro je pregledajte i istraÅ¾ite.</p>
<p>{{% notice note %}}
Od svoje orginalne primene statistiÄkog programskog jezika, R je preÅ¡ao dug put i postao vrlo moÄ‡an u podrÅ¡ci prostornih analiza. Svi R paketi ukljuÄuju vinjete sa objaÅ¡njenjima sintakse funkcija i Äesto veoma korisnim mini-tutorijalima koji ilustruju praktiÄnu upotrebu funkciju na neki zadat problem. <a href="https://cran.r-project.org/web/views/Spatial.html">CRAN Task View for Analysis of Spatial Data</a> obezbeÄ‘uje vam listu dostupnih biblioteka R-u za geografsko mapiranje koje se Äesto koriste u prostornim analizama i projektima mapiranja.
{{% /notice %}}</p>
<p><strong>ZADACI ğŸ‘‡</strong></p>
<p>VeÅ¾bajte na sledeÄ‡em setu zadataka:</p>
<ol style="list-style-type: decimal">
<li><p>ProÄitajte datoteku okruga u Srbiji na osnovu <a href="https://gadm.org/download_country_v3.html">GADM maps and data</a> i iscrtajte broj stanovnika po kvadratnom kilometru, podacima dostupnim u â€˜Serbian_Pop.csvâ€™ koje smo veÄ‡ koristili ranije.</p></li>
<li><p>Napravite mapu koja Ä‡e oznaÄavati vaÅ¡e omiljeno mesto za druÅ¾enje upotrebom leaflet paketa.</p></li>
</ol>
<p><strong>Korisni linkovi:</strong></p>
<p><a href="https://www.r-spatial.org/">R for the analysis of spatial or spatio-temporal data (blog)</a></p>
<p><a href="https://geocompr.robinlovelace.net/">Geocomputation with R</a>: knjiga o analizi geografskih podataka, vizuelizaciji i modelovanju.</p>
<p><a href="https://gadm.org/download_country_v3.html">GADM maps and data</a></p>
<p><a href="https://www.earthdatascience.org/courses/earth-analytics/get-data-using-apis/leaflet-r/">Creating Interactive Spatial Maps in R Using Leaflet</a></p>
<p><a href="https://map-rfun.library.duke.edu/031_thematic_mapping.html">Thematic Mapping with tmap</a></p>
<hr />
<p>Â© 2019 Tatjana Kecojevic</p>
