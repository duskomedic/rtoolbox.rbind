---
date: "2016-04-09T16:50:16+02:00"
title: Kako koristiti R?
output: 
  learnr::tutorial
weight: 5
---

R studio prozor ima viÅ¡e panela (potprozora). [RStudio IDE Cheet Sheet](https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf):

![Red variant](/day1/UseR/images/RStudio1.png?width=40pc)

**Gornji levo  -** <span style="color:blue">Editor koda</span>: u njemu piÅ¡ete kod koji hoÄ‡ete da pokrenete u delovima ili kao celina;  

**Donji levo -** <span style="color:blue">R konzola</span>: ovde moÅ¾ete takoÄ‘e pisati R komande i videti Å¡ta dobijate;

**Gornji desno -** <span style="color:blue">OkruÅ¾enje</span>: ovde se nalazi lista objekata koje stvarate, poput setova podataka;

**Donji desno -** <span style="color:blue">PomoÄ‡</span>: ovde se moÅ¾ete informisati o funkcijama ili paketima. U istom panelu postoji i tab u kojem Ä‡ete *prikazivati grafikone* koje budete pravili, *videti aplikacije* i dokumenta koje razvijate, prikazati *fajlove i foldere* vaÅ¡eg projekta, i *pakete* koje koristite.

R je skriptni jezik, Å¡to znaÄi da sliÄi strukturi vaÅ¡eg teksta ili eseja, ili matematiÄki dokaz. PiÅ¡emo skript koji treba da uradi specifiÄan zadatak, a koji moÅ¾emo stalno ponavljati, ili ga dati nekom drugom da ga moÅ¾e on sam koristiti. 

Trebata zapamtiti sledeÄ‡e Äinjenice:

- U R-u velika i mala slova se razlikuju i u njemu se funkcije izvrÅ¡avaju direktno; 
- Komande se upisuju sa desne strane oznake `>`
- Komande su pojedinaÄni iskazi koji mogu stajati u jednoj liniji ako su odvojeni taÄka zarezom `;`
- Same komande i izjave mogu se komentarisati upotrebom `#` taga. Komentari mogu stajati iza izjava i u jednoj liniji ili u viÅ¡e linija ali je potrebno da stoji `#` tag u svakoj novoj liniji.

{{% notice tip %}}
ğŸ’¡ Najbolji naÄin uÄenja je uÄenje kroz rad. Zbog toga, preporuÄujemo vam da komande unosite kucanjem sami a ne da ih kopirate i umeÄ‡ete naredbama copy i paste. Pored toga bilo bi dobro i da u okviru svog projekta otvorite i pojedinaÄan R script fajl i da u njemu unosite komande koje posle moÅ¾ete snimiti i kasnije ih koristiti da se podsetite na nauÄene naredbe.
{{% /notice %}}

## Krenimo sa upotrebom R-a! 

- *Otvorite RStudio*
- *Kreirajte novi projekat u kojem Ä‡ete raditi. Na desnoj strani prozora nalazi se mala plava komanda koja sadrÅ¾i drop-down meni. U njemu moÅ¾ete selektovati Novi projekat, zatim Novi direktorijum koji Ä‡ete zadati na primer da bude na vaÅ¡em desktopu, i daÄ‡ete ime projektu Moj_prvi_R. Ovako Ä‡ete kreirati folder sa ovim imenom na vaÅ¡em desktopu. Ovo Ä‡e biti vaÅ¡e okruÅ¾enje vaÅ¡eg novog projekta.* ğŸ˜‡

## Postavljanje radnog direktorijuma

Ukoliko Å¾elite da Äitate i snimate fajlove na svom kompujteru na specifiÄnoj za to predviÄ‘enoj lokaciji (koju sami odabirate) neophodno je da postaviti svoj radni direktorij u R-u. Da bi postavili svoj radni direktorij koji se nalazi u specifiÄnom folderu na vaÅ¡em raÄunaru vi Ä‡ete uraditi sledeÄ‡e:

``` r
# On a pc, you would set working directory like this
setwd("C:/Documents/MyR_Project")

# On a mac, you would set working directory like this
setwd("~/documents/MyR_Project")
```
{{% notice warning %}}
ğŸ¤“ğŸ’¡: Obavezno usvojite ispravnu sintaksu u pogledu crta i navodnika.
{{% /notice %}}

Napomena: Trenutni radni direktorijum prikazan vam je na vrhu panela za konzolu. Postaviti radni direktorijum moÅ¾ete takoÄ‘e postaviti i preko main menija R studija. Za to je potrebno da pronaÄ‘ete meni Session, zatim Set Working Directory pa na kraju Choose Directory:

- selecting the options available from RStudio's main menu 

Use the **Tools | Change Working Dir...** menu (**Session | Set Working Directory** on a mac).

![Red variant](/day1/UseR/images/SetWD.png?width=50pc)

- Radni direktorij moÅ¾ete promeniti i opcijom iz panela za fajlove, desno dole

Upotrebite **More | Set As Working Directory** meni

![Red variant](/day1/UseR/images/SetWD1.png?width=20pc)

MeÄ‘utim, najbolje je da svaki vaÅ¡ novi projekat zapoÄinjete tako Å¡to Ä‡ete to uraditi preko File menija pa zatim izabrati opciju New Project (**File | New Project...**) Tako Ä‡ete automatski postaviti svoj radni direktorijum bez dodatne potrebre da dodatno definiÅ¡ete gde se nalazi vaÅ¡ script fajl. ViÅ¡e informacija o postavljanju radnog okruÅ¾enja moÅ¾ete proÄitati u Älanku [Project-oriented workflow ğŸ’»ğŸ”¥](https://www.tidyverse.org/articles/2017/12/workflow-vs-script/) autora [Jenny Bryan](https://jennybryan.org/) kako biste se uverili da je zapoÄinjanje svakog novog vaÅ¡eg projekta na naÄin da to raditi preko File menija je dobra navika koju trebate da usvojite. 

## R paketi

*"Osnovna jedinica R koda je paket."* [Hadley Wickham, *R packages*](http://r-pkgs.had.co.nz/intro.html)

R paketi su kolekcije funkcija koda, setova podataka, dokumentacije i testova koje razvija zajednica, u najveÄ‡om broju sluÄajava oni su dostupni preko <span style="color:red">C</span>omprehensive <span style="color:red">R</span> <span style="color:red">A</span>rchive <span style="color:red">N</span>etwork, or <span style="color:red">CRAN</span>, mreÅ¾e koja se brine za standarde R paketa. Ove pakete razvijaju raznorazni eksperti iz raÄitih nauÄnih oblasti i trenutno njihov broj je preko 14000. Mnoge od analiza koje oni nude nisu dostupni niti u jednom standardnom setu softverskih paketa, a to oni su i razlog uspeÅ¡nosti R-a.  

Kada startujete R automatski vi pozivate [`package:base`](https://www.rstudio.com/wp-content/uploads/2016/05/base-r.pdf), koji je sistemska biblioteka, tj. paket u kojem su sve standarde funkcije definisane. Ostali paketi koji se zovu *base packages* sadrÅ¾e osnovne statistiÄke rutine. PretpostavljajuÄ‡i da ste povezani na internet, pakete moÅ¾ete lako instalirati upotrebom `install.packages()` komande. To moÅ¾ete uraditi i preko glavnog menija tako Å¡to Ä‡ete selektovati meni Tools na glavnom meniju Rstudija, zatim opciju Install Packages **Tools | Install Packages...** kad to uradite potrebno je i da unesete ime Å¾eljenog paketa u dijalog boks da bi on bio instaliran.

![Red variant](/day1/UseR/images/InstallPckg.png?width=20pc)

Jednom kada instalirate neki paket, on Ä‡e biti vidljiv u listi instaliranih paketa koja se nalazi panelu za pakete **Packages pane** u donjem desnom panelu R studija. Svaki paket ako hoÄ‡ete da koristite u svom projektu potrebno je da ga pozovete u samom projektu, to jednostavno radite tako Å¡to unesete ime paketa u `library()` funkciju, ili to moÅ¾ete uraditi tako Å¡to Äekirate kvadratiÄ‡ koji se nalazi neposredno uz ime paketa a koji se nalazi u tabulatoru Packages **Packages pane**.

![Red variant](/day1/UseR/images/Packages.png?width=20pc)

{{% notice note %}}
ğŸ’¡: Napomena: Imajte na umu da instalaciju paketa moÅ¾ete uraditi i iz  **Packages pane**! Da li ste primetili da u okviru ovog taba postoji komanda *Install* koja se nalazi gore levo u tom tabu?
{{% /notice %}}

## RaÄunajte u R-u

Da poÄnete upotrebu R-a moÅ¾da je dobro da vidite kako on radi kao kalkulator. ğŸ˜

U vaÅ¡oj konzoli ukucajte `2 + 2`i pritisnite enter. Primetite da nije potrebno da kucate znak jednako i da vaÅ¡ odgovor poÄinje jedinicom [1]. Jedinica [1] ukazuje da je u odgovoru jedan broj. Ukoliko, na primer, odgovor sadrÅ¾i viÅ¡e brojeva, brojevima kao ova jedinica biÄ‡e iskazana svaka grupa brojeva koji su odgovori.

Vidite?! R je jedan veliki kalkulator! ğŸ˜² 

#### AritmetiÄke i logiÄke operacije

R-ovi binarni i logiÄki operatori izgledaÄ‡e veoma sliÄno onome Å¡to ste veÄ‡e iskusili ako ste radili bilo kakvo prethodno programiranje.

#####  AritmetiÄki operatori 

![Red variant](/day1/UseR/images/ArithmeticOp.png?width=20pc)

#####  LogiÄki operatori 

![Red variant](/day1/UseR/images/LogicalOp.png?width=20pc)

Probajte sada da uradite i druge matematiÄke operacije u R-u, naprimer sabriranje, mnoÅ¾enje, deljenje, stepenovanje, i druge. Na primer, probajte sledeÄ‡e:

```
2 + 5
3 - 2
18 / 6
4 * 7
(5 - 3)^2 / 4
9^(1/2) * 4
```

#### Reproduktabilnost (ponovljivost): SaÄuvajte vaÅ¡ skript

Kod koji upravo kucate i koji Å¾elite da izraÄunate moÅ¾e biti snimljen u R skript ili R Markdown fajlu. Te fajlove moÅ¾ete u okviru svog projekta otvoriti tako sto selektujete File, pa zatim New File opcije iz menija. R skript fajl ima nastavak .R dok R Markdown fajl koji kombinuje R kode i Markdown code u jednom fajlu zavrÅ¡ava nastavkom .Rmd.

{{% notice note %}}
ğŸ¤“ğŸ’¡: Kod koji piÅ¡ete samo da bi brzo neÅ¡to proverili ili istraÅ¾ili moÅ¾e se pisati u konzoli. Ali kada Å¾elimo da kod koji piÅ¡emo ponovo upotrebimo neophodno ga je saÄuvati kao skript fajl.
{{% /notice %}}

Da biste napravili novi skript fajl potrebno je da potraÅ¾ite meni File, a zatim New File i R skript  **File | New File | R Script** ili moÅ¾ete to isto uraditi preko male ikonice koja se nalazi u gornjem levu uglu R studija na kojoj se nalazi zeleni krstiÄ‡.

![Red variant](/day1/UseR/images/NewScript.png?width=15pc)

Kod koji kucati u R skript fajlu moÅ¾e se pokrenuti i izvrÅ¡iti u konzoli. Komandom **Run** koju moÅ¾ete pokrenuti pomoÄ‡u ikonice koja se nalazi u desnom gornjem delu vaÅ¡eg R skripta pokrenuÄ‡e se linija koda na kojoj vaÅ¡ kursor stoji.

Ako Å¾elite da pokrenete viÅ¡e linija vaÅ¡eg koda treba da ih selektujete i da onda startujete **Run** komandu.

![Red variant](/day1/UseR/images/RunScript.png?width=30pc)

{{% notice tip %}}
ğŸ’¡:Naviknite se da odmah snimite vaÅ¡ skript svaki put kada ga kreirate. TakoÄ‘e, snimajte ga i nakon Å¡to Å¾elite da startujete vaÅ¡ kod zbog sluÄajeva da vam podaci ne nestanu kada se eventualno R sruÅ¡i ili se neÅ¡to sliÄno ne dogodi. ğŸ˜£ &@#$!?#%
{{% /notice %}}

<https://www.rstudio.com/products/rstudio/features/>


#### R objekti

R vam obezbeÄ‘uje da vaÅ¡e podatke referiÅ¡ite kao objekte. Da biste ih referisali kao objekte treba da koristite simbol dodele <span style="color:red"><-</span>, koji se sastoji od znaka â€manje odâ€œ i znaka â€minusaâ€œ, bez slobodnog mesta izmeÄ‘u njih. Tako stvaramo skalarne konstante, koje nazivamo varijablama, i na kojima kasnije moÅ¾emo primenjivati matematiÄke operacije.

```
x <- 5
y <- 6
```

Ove objekte moÅ¾ete koristiti u raÄunanju na isti naÄin na koji ste veÄ‡ raÄunali brojeve ranije:

```
x + y
```

u varijabli moÅ¾ete i saÄuvati rezultat raÄuna koji ste uradili tako Å¡o Ä‡ete napraviti novi objekat koji Ä‡e to uraditi:
```
z <- x * y
z
```

{{% notice warning %}}
ğŸ¤“ğŸ’¡ ZAPAMTITE!!! <span style="color:red">Operator **<-** sastavljen je od znaka â€manje odâ€œ i minusa, ali **bez razmaka izmeÄ‘u njih**!!!!</span> 
{{% /notice %}}

PokuÅ¡ajte da kucate sledeÄ‡e komande  
```
x< -5
y< -6
```

i vidite Å¡ta Ä‡e se desiti.

Nakon Å¡to ste u R-u kreirali neke objekte, moÅ¾ete ih izlistati upotrebom funkcije `ls()`:
```
ls()
```

R studio vam obezbeÄ‘uje vrlo komotno radno okruÅ¾enje u kojem moÅ¾ete pratiti listu kreiraih objekata u panelu **Environment** (okruÅ¾enje) koji se nalazi u gornjem desnom uglu R studija. 

![Red variant](/day1/UseR/images/Environment_Panel.png?width=20pc)

#### UgraÄ‘ene funkcije

R nije poput konvencionalnih statistiÄkih paketa poput SAS-a, Minitab-a, SPSS-a, da spomenemo samo neke. On je viÅ¡e programski jezik dizajniran za sprovoÄ‘enje analize podataka. Dolazi sa velikim brojem veÄ‡ gotovih blokova koda koji vam omoguÄ‡uju upotrebu podataka, matematiÄkih raÄuna na podacima, da izvedete niz statistiÄkih analiza od najednostavnijih do sloÅ¾enih, ali i onih ekstremno sloÅ¾enih, ali i da kreirate fantastiÄne grafikone. Ove prethodno veÄ‡ napravljene blokove koda nazivamo <span style="color:red">**funkcijama**</span>.

Pored toga R poseduje i set standardnih matematiÄkih funkcije koje moÅ¾da nikada neÄ‡ete upotrebljavati: `sin`, `cos`, `tan`, `asin`, `atan`, `log`, `log10`, `exp`, `abs`, `sqrt`, `factorial`â€¦ Da bi ih koristili, sve Å¡to treba da kucate je kucate tip funkcije i da u nju za objekat (argument) stavite bilo Å¡ta Å¡to Å¾elite da izraÄunate, to radite tako Å¡to to staviti u zagradi odmah iza funkcije.

Probajte neke od njih ğŸ˜ƒ

```
sqrt(144)
log10(8)
log10(100)
log(100)
exp(1)
pi
sin(pi/2)
abs(-7)
factorial(3)
exp(x)
log(y, 2)
```

Neki odreÄ‘eni izraz moÅ¾e biti argument funkcije:

```
z <- x * y
trunc(x^2 + z / y)
log((100 * x - y^2) / z)
```

TakoÄ‘e, moÅ¾ete ugnjezditi funkcije unutar drugih funkcija:

```
round(exp(x), 2)
p <- abs(floor(log((100*x - y^2) / exp(z))))
p
```

{{% notice info %}}
ğŸ¤“ğŸ’¡ <span style="color:red">Da biste saznali neÅ¡to viÅ¡e o funkciji koju Å¾elite da koristite, neophodno je da ukucate znak upitnika <span style="color:red">**?**</span>, ispred imena funkcije koja vas zanima. Ovo moÅ¾ete posebno naÄ‡i za korisno kada budete koristili komplikovanije funkcije. Help (pomoÄ‡) vam dati ne samo detaljan opis funkcije i njene strukture, uvoznih i izvezenih argumenata, veÄ‡ i praktiÄne primere upotrebe te funkcije. Probajte da zatraÅ¾ite od R-a pomoÄ‡ za funkciju `lm()` da vidite Äemu ona sluÅ¾i.
{{% /notice %}}

#### Vektori

Kada analizirate podatke radiÄ‡ete sa velikim brojem varijabli i brojeva. Upravo zbog toga treba da ih Äuvate u objektima da bi sve to saÄuvali. Varijable mogu biti razliÄitog tipa: logiÄki, prirodni brojevi (integer), realni brojevi (double), string (tekst) su samo neke od njih. <span style="color:red">Varijable sa jednom ili viÅ¡e vrednosti istog tipa nazivaju se **vektori**</span>. TakoÄ‘e, <span style="color:red">varijabla sa jednom vrednosti (poznata kao <span style="color:red">**scalar**</span>) isto je vektor ali duÅ¾ine 1. Dodavanje vrednosti vektorima moÅ¾e se raditi na razliÄite naÄine:

* Vrednosti moÅ¾ete dodavati upotrebom simbola dvotaÄka (`:`) koja Ä‡e vam generisati vrednosti od do ili ih moÅ¾ete graditi pomoÄ‡u funkcije `rep()` da biste ponovili odreÄ‘enu vrednost ili broj odreÄ‘en broj puta.

```{r}
x <- 1:10
x
```

```{r}
x <- rep(1,10)
x
```

* Vektor moÅ¾ete generisati upotrebom funkcije spajanja c koja omoguÄ‡ava unos vrednosti u vektor na naÄin kako je to prikazano dole

```{r}
x <- c(2, 6, 4, 2, 3, 7, 1, 5, 9, 8)
x
```

* MoÅ¾ete kreirati vektor definisanjem opseg brojeva i priraÅ¡taja (inkriment). Na primer, u sluÄaju koji je prikazan dole opseg je od 1 do 10, a priraÅ¡taj 0.2

```{r}
seq(1,10,0.2)
```

{{% notice note %}}
ğŸ’¡: R vrlo lako vrÅ¡i aritmetiÄke operacije na vektorima, jednako brzo kao i kad radi sa skalarima. MatematiÄke operacije na vektorima rade isto kao Å¡to smo veÄ‡ videli, kada smo radili sa skalarima.
{{% /notice %}}

```{r}
x <- rep(1,10)
y <- 1:10
x
y
c(x, y)
x + y
x + 2 * y
x^2 / y
z <- (x+y)/2
z
z <- c(z, rep(1, 3), c(100, 200, 300))+1
z
p <- 2.5
z*p
```

##### Pristupanje elementima Vektora

Da biste pristupili odreÄ‘enom elementu vektora, potrebno je da za <span style="color:red">upotrebite indeks vektora i to tako Å¡to ga unosite u uglaste zagrade **[]**</span>. SledeÄ‡i primer pokazuje kako se to radi. Indeks vektora baziran je na jedinici, tj. prvi Älan u vektoru ima indeks 1, tako da ako traÅ¾ite Äetvrtu poziciju koristite indeks 4 da biste pristupili ovom elementu.

```{r}
x <- c(9, 3, 7, 2, 9, 2, 1, 5, 4, 6)
x
x[4]
```

{{% notice note %}}
ğŸ’¡: U R-u moÅ¾ete proceniti funkcije na celom vektoru, Å¡to vam pomaÅ¾e s obzirom da ne treba da koristite za taj posao lupove (looping).
{{% /notice %}}


```{r}
y <- c(4, 1, 0, 8, 1, x)
max(y)
range(y)
mean(y)
var(y)
sort(y)
cumsum(y)
```

{{% notice note %}}
ğŸ’¡: Napomena:  <span style="color:red">NedostajuÄ‡e vrednosti u R-u</span> predstavljene su simbolom  <span style="color:red">**NA** (nije dostupno)</span> ili <span style="color:red">**NaN** (nije broj)</span> za nedefinsane matematiÄke operacije.
{{% /notice %}}

Ako je indeks van dometa prikazuje se NA, kao na slici dole. 

```{r}
z <- c(5, 8, 2)
z[10]
```


MoÅ¾ete dobiti Å¾eljeni izbor elemenata vektora **tako Å¡to cÌete navesti upit u uglastim zagradama `[]`**:

```{r}
y <- c(9, 3, 7, 2, 9, 2, 1, 5, 4, 6)
y[y > 5]
y[y > 10]
y[y != 2]
```

#### Matrice

<span style="color:red">Kada su podaci rasporeÄ‘eni u dve dimenzije, a ne u jednoj, imamo <span style="color:red">**matrice**</span>. U R-u matrice se kreiraju uz pomoÄ‡ funkcije `matrix()`:

```{r}
ma1 <- matrix(c(1, 0, -20, 0, 1, -15, 1, -1, 0),
              nrow = 3, ncol = 3, 
              byrow = TRUE)
ma1
dim(ma1)
```

PojedinaÄni broj u matrici naziva se element matrice. Svaki element matrice jedinstveno je definisan brojem kolone i brojem reda u kojoj se nalazi. Dimenziju matrice moÅ¾ete proveriti funkcijom `dim()`.

Elementu matrice  `i`-tog reda, `j` kolone pristupate indeksom koji unosite u uglaste zagradu `[i, j]`. ÄŒitav `i` red ili `j` kolonu moÅ¾ete izdvojiti iz matrice na naÄin prikazan u kodu dole.

```{r}
ma1 <- matrix(c(4, 10, 130, 0, 8, -7, 9, 11, -2, 7, -5, 4),
              nrow = 3, ncol = 4)
ma1
ma1[2, 3]
ma1[1, ]
ma1[ , 4]
```

Standardna skalarna algebra, koja se bavi operacijama na pojedinaÄnim brojevima, ima skup dobro utvrÄ‘enih pravila za upravljanje koje ukljuÄuju dodavanje, oduzimanje, mnoÅ¾enje i deljenje. Na sliÄan naÄin razvijen je skup pravila koja nam omogucÌavaju da upravljamo matricama. MeÄ‘utim, uvoÄ‘enje ovih pravila je izvan obima ovog kursa, ali su dobro pokrivena na veb lokaciji  [www.statisticshowto.com](http://www.statisticshowto.com/matrices-and-matrix-algebra/).


## Zadaci ğŸ‘‡

VeÅ¾bajte tako Å¡to Ä‡ete proÄ‡i kroz sledeÄ‡i niz zadataka:

1) 1.	Kreirajte vektore `x1` i `x2`. Vektor `x1` je sastavljen od sledeÄ‡ih brojeva: `1, 4, 7, 9, 11, 12, 13, 15` i `18`, a vektor `x2` od brojeva: `1, 1, 1, 2, 2, 2, 3, 3, 3`.

2) Oduzmite vektor `x2` od vektora `x1`.

3) Kreirajte novi vektor `x3` tako Å¡to da sadrÅ¾i i Älanove vektora `x1` i `x2`. 

4) IzraÄunajte srednju vrednost i varijansu vektora `x3`.
 
5) IzraÄunajte medijanu sva tri vektora.

6) Kreirajte matricu `m1` koja ima sledeÄ‡e elemente:
`matrix(c(1, 5, 9, 2, 6, 10, 3, 7, 11, 4, 8, 12), nrow = 4, 
ncol = 3, byrow = TRUE)`

7) Napravite kod koji Ä‡e pronaÄ‡i `2`-broj u vektorima `x1` i `x2` a potom element `2`-om redu i `3`-oj koloni u matrici `m1`.

8) Dodajte `5`-i broj u vektoru `x1` elementu iz matrice `m1` koji je u `1`-om redu i `1`-oj koloni.

9) IzraÄunajte srednju vrednost svih brojeva vektora `x3` koji su manji od 13.


-----------------------------
Â© 2019 Tatjana Kecojevic
